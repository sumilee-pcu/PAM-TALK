<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒ„ì†Œ ì±Œë¦°ì§€ | PAM-TALK</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* í—¤ë” */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #27ae60;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: #27ae60;
        }

        .nav-links a.active {
            color: #27ae60;
            font-weight: 600;
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #27ae60;
        }

        /* ë©”ì¸ ì½˜í…ì¸  */
        main {
            margin-top: 80px;
            padding: 2rem 0;
        }

        /* íˆì–´ë¡œ ì„¹ì…˜ */
        .hero {
            color: white;
            padding: 4rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero .subtitle {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .hero-stat {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .hero-stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .hero-stat-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ */
        .dashboard {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
        }

        .user-level {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .carbon-tracker {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .carbon-meter {
            text-align: center;
        }

        .carbon-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(#27ae60 70%, #e8f5e8 70%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            position: relative;
        }

        .carbon-inner {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .carbon-value {
            font-size: 2rem;
            font-weight: bold;
            color: #27ae60;
        }

        .carbon-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .progress-stat {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .progress-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #27ae60;
            margin-bottom: 0.3rem;
        }

        .progress-stat-label {
            font-size: 0.9rem;
            color: #666;
        }

        /* í™œì„± ì±Œë¦°ì§€ ì„¹ì…˜ */
        .active-challenges {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #333;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .challenges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .challenge-card {
            background: linear-gradient(135deg, #f8f9fa, #fff);
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
        }

        .challenge-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #27ae60;
        }

        .challenge-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #27ae60;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .challenge-status.completed {
            background: #28a745;
        }

        .challenge-status.new {
            background: #007bff;
        }

        .challenge-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 1rem;
        }

        .challenge-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .challenge-desc {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .challenge-progress {
            margin-bottom: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #666;
        }

        .challenge-reward {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 0.8rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .challenge-participants {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .participant-avatars {
            display: flex;
            margin-left: 0.5rem;
        }

        .participant-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            border: 2px solid white;
            margin-left: -8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            font-weight: bold;
        }

        .challenge-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: #27ae60;
            border: 2px solid #27ae60;
        }

        .btn-outline:hover {
            background: #27ae60;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-disabled {
            background: #6c757d;
            color: white;
            cursor: not-allowed;
        }

        /* ë¦¬ë”ë³´ë“œ ì„¹ì…˜ */
        .leaderboard {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
        }

        .leaderboard-list {
            list-style: none;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        .leaderboard-item:hover {
            background: #f8f9fa;
        }

        .leaderboard-rank {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }

        .leaderboard-rank.gold {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
        }

        .leaderboard-rank.silver {
            background: linear-gradient(45deg, #c0c0c0, #e5e5e5);
            color: #333;
        }

        .leaderboard-rank.bronze {
            background: linear-gradient(45deg, #cd7f32, #daa520);
            color: white;
        }

        .leaderboard-rank.other {
            background: #f8f9fa;
            color: #666;
        }

        .leaderboard-user {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .user-info h4 {
            margin-bottom: 0.2rem;
        }

        .user-info .user-level {
            font-size: 0.8rem;
            background: none;
            color: #666;
            padding: 0;
        }

        .leaderboard-score {
            text-align: right;
        }

        .score-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #27ae60;
        }

        .score-label {
            font-size: 0.8rem;
            color: #666;
        }

        /* ìƒˆ ì±Œë¦°ì§€ ìƒì„± */
        .create-challenge {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 3rem;
        }

        .create-challenge h3 {
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .create-challenge p {
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .hero-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .carbon-tracker {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .progress-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .challenges-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-header {
                flex-direction: column;
                align-items: start;
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .nav-links {
                display: none;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        .challenge-icon:hover {
            animation: bounce 1s;
        }

        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 10000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <a href="/" class="logo">
                <i class="fas fa-leaf"></i>
                PAM-TALK
            </a>

            <ul class="nav-links">
                <li><a href="/">í”¼ë“œ</a></li>
                <li><a href="/static/marketplace.html">ì¥í„°</a></li>
                <li><a href="/static/challenges.html" class="active">ì±Œë¦°ì§€</a></li>
                <li><a href="#community">ì»¤ë®¤ë‹ˆí‹°</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>ğŸŒ íƒ„ì†Œ ì±Œë¦°ì§€</h1>
                <p class="subtitle">ê°œì¸ë³„ íƒ„ì†Œë°œìêµ­ ì¤„ì´ê¸° ë„ì „! ì§€êµ¬ë¥¼ êµ¬í•˜ê³  ë¦¬ì›Œë“œë„ ë°›ìœ¼ì„¸ìš”</p>

                <div class="hero-stats" id="heroStats">
                    <div class="hero-stat">
                        <div class="hero-stat-value">-2,847kg</div>
                        <div class="hero-stat-label">ëˆ„ì  COâ‚‚ ì ˆì•½</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">1,234</div>
                        <div class="hero-stat-label">ì°¸ì—¬ì ìˆ˜</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">15</div>
                        <div class="hero-stat-label">ì§„í–‰ì¤‘ ì±Œë¦°ì§€</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-stat-value">89%</div>
                        <div class="hero-stat-label">ì„±ê³µë¥ </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="container">
            <!-- ê°œì¸ ëŒ€ì‹œë³´ë“œ -->
            <section class="dashboard">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">
                        <i class="fas fa-user-circle"></i>
                        ë‚´ íƒ„ì†Œë°œìêµ­ ëŒ€ì‹œë³´ë“œ
                    </h2>
                    <div class="user-level">
                        <i class="fas fa-medal"></i>
                        ì—ì½” ì›Œë¦¬ì–´ (ë ˆë²¨ 7)
                    </div>
                </div>

                <div class="carbon-tracker">
                    <div class="carbon-meter">
                        <div class="carbon-circle">
                            <div class="carbon-inner">
                                <div class="carbon-value" id="carbonValue">-12.5</div>
                                <div class="carbon-label">kg COâ‚‚</div>
                            </div>
                        </div>
                        <p>ì´ë²ˆ ë‹¬ ì ˆì•½ëŸ‰</p>
                    </div>

                    <div class="progress-stats">
                        <div class="progress-stat">
                            <div class="progress-stat-value">890</div>
                            <div class="progress-stat-label">ì—ì½” í¬ì¸íŠ¸</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">7</div>
                            <div class="progress-stat-label">ì™„ë£Œí•œ ì±Œë¦°ì§€</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">3</div>
                            <div class="progress-stat-label">ì§„í–‰ì¤‘ ì±Œë¦°ì§€</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">35km</div>
                            <div class="progress-stat-label">í‰ê·  ë¡œì»¬ ê±°ë¦¬</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">15ì¼</div>
                            <div class="progress-stat-label">ì—°ì† ì°¸ì—¬</div>
                        </div>
                        <div class="progress-stat">
                            <div class="progress-stat-value">234</div>
                            <div class="progress-stat-label">íŒ”ë¡œì›Œ</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- í™œì„± ì±Œë¦°ì§€ -->
            <section class="active-challenges">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i>
                    í™œì„± ì±Œë¦°ì§€
                </h2>

                <div class="challenges-grid" id="challengesGrid">
                    <!-- ì±Œë¦°ì§€ ë¡œë”© ì¤‘ -->
                    <div style="text-align: center; padding: 3rem; grid-column: 1/-1;">
                        <div style="width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #27ae60; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
                        <p>ì±Œë¦°ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                    </div>
                </div>
            </section>

            <!-- ë¦¬ë”ë³´ë“œ -->
            <section class="leaderboard">
                <h2 class="section-title">
                    <i class="fas fa-trophy"></i>
                    ì´ë²ˆ ë‹¬ ë¦¬ë”ë³´ë“œ
                </h2>

                <ul class="leaderboard-list" id="leaderboardList">
                    <!-- ë¦¬ë”ë³´ë“œ ë¡œë”© ì¤‘ -->
                </ul>
            </section>

            <!-- ìƒˆ ì±Œë¦°ì§€ ìƒì„± -->
            <section class="create-challenge">
                <h3>
                    <i class="fas fa-plus-circle"></i>
                    ë‚˜ë§Œì˜ ì±Œë¦°ì§€ ë§Œë“¤ê¸°
                </h3>
                <p>ì»¤ë®¤ë‹ˆí‹°ì™€ í•¨ê»˜í•  ìƒˆë¡œìš´ í™˜ê²½ ì±Œë¦°ì§€ë¥¼ ì œì•ˆí•´ë³´ì„¸ìš”!</p>
                <button class="btn btn-primary" onclick="createChallenge()">
                    <i class="fas fa-lightbulb"></i>
                    ì±Œë¦°ì§€ ì œì•ˆí•˜ê¸°
                </button>
            </section>
        </div>
    </main>

    <script>
        // API ì—”ë“œí¬ì¸íŠ¸
        const API_BASE = 'http://localhost:5003/api';

        // ê°œì¸ ë°ì´í„° (ë°ëª¨)
        let userData = {
            level: 7,
            levelName: 'ì—ì½” ì›Œë¦¬ì–´',
            carbonSaved: -12.5,
            ecoPoints: 890,
            completedChallenges: 7,
            activeChallenges: 3,
            averageDistance: 35,
            streakDays: 15,
            followers: 234
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', async () => {
            await loadChallenges();
            await loadLeaderboard();
            updateHeroStats();
        });

        // ì±Œë¦°ì§€ ëª©ë¡ ë¡œë“œ
        async function loadChallenges() {
            try {
                const response = await fetch(`${API_BASE}/carbon/challenges`);
                const data = await response.json();

                if (data.success && data.challenges) {
                    renderChallenges(data.challenges);
                } else {
                    // ë°ëª¨ ë°ì´í„° ì‚¬ìš©
                    const demoChallenges = generateDemoChallenges();
                    renderChallenges(demoChallenges);
                }
            } catch (error) {
                console.error('ì±Œë¦°ì§€ ë¡œë“œ ì‹¤íŒ¨:', error);
                const demoChallenges = generateDemoChallenges();
                renderChallenges(demoChallenges);
            }
        }

        // ë°ëª¨ ì±Œë¦°ì§€ ë°ì´í„° ìƒì„±
        function generateDemoChallenges() {
            return [
                {
                    challenge_id: 'local_food_30',
                    title: 'ë¡œì»¬í‘¸ë“œ 30ì¼ ì±Œë¦°ì§€',
                    description: 'í•œ ë‹¬ê°„ 50km ì´ë‚´ ë†ì‚°ë¬¼ë§Œ êµ¬ë§¤í•˜ê¸°! ìš´ì†¡ìœ¼ë¡œ ì¸í•œ íƒ„ì†Œë°°ì¶œì„ ì¤„ì—¬ë³´ì„¸ìš”.',
                    target_reduction: 15.0,
                    duration_days: 30,
                    reward_points: 500,
                    participants: 156,
                    status: 'active',
                    progress: 73,
                    user_joined: true,
                    difficulty: 'medium',
                    category: 'ë¡œì»¬í‘¸ë“œ'
                },
                {
                    challenge_id: 'zero_waste_cooking',
                    title: 'ì œë¡œì›¨ì´ìŠ¤íŠ¸ ìš”ë¦¬ ë„ì „',
                    description: 'ìŒì‹ ì“°ë ˆê¸° ì—†ëŠ” ìš”ë¦¬ë¡œ í™˜ê²½ì„ ë³´í˜¸í•˜ê³  ì°½ì˜ì ì¸ ë ˆì‹œí”¼ë¥¼ ê°œë°œí•´ë³´ì„¸ìš”.',
                    target_reduction: 8.0,
                    duration_days: 14,
                    reward_points: 300,
                    participants: 89,
                    status: 'active',
                    progress: 45,
                    user_joined: true,
                    difficulty: 'easy',
                    category: 'ì œë¡œì›¨ì´ìŠ¤íŠ¸'
                },
                {
                    challenge_id: 'organic_month',
                    title: 'ìœ ê¸°ë† í•œ ë‹¬ ìƒí™œ',
                    description: 'ìœ ê¸°ë† ì¸ì¦ ì œí’ˆë§Œ êµ¬ë§¤í•˜ì—¬ í™”í•™ ë†ì•½ ì‚¬ìš©ì„ ì¤„ì´ê³  í† ì–‘ì„ ë³´í˜¸í•´ìš”.',
                    target_reduction: 12.0,
                    duration_days: 30,
                    reward_points: 450,
                    participants: 203,
                    status: 'active',
                    progress: 0,
                    user_joined: false,
                    difficulty: 'hard',
                    category: 'ìœ ê¸°ë†'
                },
                {
                    challenge_id: 'plant_based_week',
                    title: 'ì‹ë¬¼ì„± ì‹ë‹¨ ì¼ì£¼ì¼',
                    description: 'ì¼ì£¼ì¼ê°„ ì‹ë¬¼ì„± ì‹í’ˆë§Œ ì„­ì·¨í•˜ì—¬ ì¶•ì‚°ì—…ìœ¼ë¡œ ì¸í•œ íƒ„ì†Œë°°ì¶œì„ ì¤„ì—¬ë´…ì‹œë‹¤.',
                    target_reduction: 20.0,
                    duration_days: 7,
                    reward_points: 200,
                    participants: 67,
                    status: 'active',
                    progress: 100,
                    user_joined: true,
                    difficulty: 'medium',
                    category: 'ì‹ë‹¨ê´€ë¦¬'
                },
                {
                    challenge_id: 'season_eating',
                    title: 'ì œì²  ìŒì‹ ë¨¹ê¸° ì±Œë¦°ì§€',
                    description: 'ì œì²  ë†ì‚°ë¬¼ë§Œ êµ¬ë§¤í•˜ì—¬ ì—ë„ˆì§€ ì†Œë¹„ë¥¼ ì¤„ì´ê³  ìì—°ì˜ ë¦¬ë“¬ì— ë§ì¶˜ ì‹ìƒí™œì„ ì‹¤ì²œí•´ìš”.',
                    target_reduction: 6.0,
                    duration_days: 21,
                    reward_points: 350,
                    participants: 124,
                    status: 'active',
                    progress: 0,
                    user_joined: false,
                    difficulty: 'easy',
                    category: 'ì œì² ìŒì‹'
                },
                {
                    challenge_id: 'bike_delivery',
                    title: 'ìì „ê±° ë°°ì†¡ ì„ íƒí•˜ê¸°',
                    description: 'ë†ì‚°ë¬¼ ì£¼ë¬¸ ì‹œ ìì „ê±° ë°°ì†¡ì„ ì„ íƒí•˜ì—¬ ë°°ì†¡ ì°¨ëŸ‰ì˜ íƒ„ì†Œë°°ì¶œì„ ì¤„ì—¬ë³´ì„¸ìš”.',
                    target_reduction: 4.5,
                    duration_days: 14,
                    reward_points: 250,
                    participants: 45,
                    status: 'active',
                    progress: 30,
                    user_joined: false,
                    difficulty: 'easy',
                    category: 'ì¹œí™˜ê²½ë°°ì†¡'
                }
            ];
        }

        // ì±Œë¦°ì§€ ë Œë”ë§
        function renderChallenges(challenges) {
            const grid = document.getElementById('challengesGrid');

            if (challenges.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                        <i class="fas fa-seedling" style="font-size: 3rem; color: #ddd; margin-bottom: 1rem;"></i>
                        <p>í™œì„± ì±Œë¦°ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = challenges.map(challenge => {
                const difficultyColor = {
                    'easy': '#28a745',
                    'medium': '#ffc107',
                    'hard': '#dc3545'
                };

                const statusText = challenge.user_joined ?
                    (challenge.progress === 100 ? 'ì™„ë£Œë¨' : 'ì°¸ì—¬ì¤‘') : 'ìƒˆë¡œìš´';
                const statusClass = challenge.progress === 100 ? 'completed' :
                    (challenge.user_joined ? 'active' : 'new');

                return `
                    <div class="challenge-card" onclick="viewChallenge('${challenge.challenge_id}')">
                        <div class="challenge-status ${statusClass}">
                            ${statusText}
                        </div>

                        <div class="challenge-icon">
                            ${getChallengeIcon(challenge.category)}
                        </div>

                        <h3 class="challenge-title">${challenge.title}</h3>
                        <p class="challenge-desc">${challenge.description}</p>

                        <div class="challenge-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${challenge.progress}%"></div>
                            </div>
                            <div class="progress-text">
                                <span>ì§„í–‰ë¥ : ${challenge.progress}%</span>
                                <span style="color: ${difficultyColor[challenge.difficulty]}">
                                    ${challenge.difficulty.toUpperCase()}
                                </span>
                            </div>
                        </div>

                        <div class="challenge-reward">
                            <i class="fas fa-coins" style="color: #ffc107;"></i>
                            <strong>+${challenge.reward_points} ì—ì½”í¬ì¸íŠ¸</strong>
                            <span style="margin-left: auto;">-${challenge.target_reduction}kg COâ‚‚</span>
                        </div>

                        <div class="challenge-participants">
                            <i class="fas fa-users"></i>
                            <span>${challenge.participants}ëª… ì°¸ì—¬ì¤‘</span>
                            <div class="participant-avatars">
                                ${Array.from({length: Math.min(5, Math.floor(challenge.participants/20))}, (_, i) => `
                                    <div class="participant-avatar">${String.fromCharCode(65 + i)}</div>
                                `).join('')}
                                ${challenge.participants > 100 ? '<div class="participant-avatar">+</div>' : ''}
                            </div>
                        </div>

                        <div class="challenge-actions">
                            ${challenge.user_joined ?
                                (challenge.progress === 100 ?
                                    `<button class="btn btn-success" disabled>
                                        <i class="fas fa-check"></i> ì™„ë£Œ!
                                    </button>` :
                                    `<button class="btn btn-primary" onclick="event.stopPropagation(); updateProgress('${challenge.challenge_id}')">
                                        <i class="fas fa-chart-line"></i> ì§„í–‰ ì—…ë°ì´íŠ¸
                                    </button>`
                                ) :
                                `<button class="btn btn-primary" onclick="event.stopPropagation(); joinChallenge('${challenge.challenge_id}')">
                                    <i class="fas fa-play"></i> ë„ì „í•˜ê¸°
                                </button>`
                            }
                            <button class="btn btn-outline" onclick="event.stopPropagation(); shareChallenge('${challenge.challenge_id}')">
                                <i class="fas fa-share"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ì±Œë¦°ì§€ ì•„ì´ì½˜ ê°€ì ¸ì˜¤ê¸°
        function getChallengeIcon(category) {
            const icons = {
                'ë¡œì»¬í‘¸ë“œ': '<i class="fas fa-map-marker-alt"></i>',
                'ì œë¡œì›¨ì´ìŠ¤íŠ¸': '<i class="fas fa-recycle"></i>',
                'ìœ ê¸°ë†': '<i class="fas fa-seedling"></i>',
                'ì‹ë‹¨ê´€ë¦¬': '<i class="fas fa-apple-alt"></i>',
                'ì œì² ìŒì‹': '<i class="fas fa-calendar-alt"></i>',
                'ì¹œí™˜ê²½ë°°ì†¡': '<i class="fas fa-bicycle"></i>'
            };
            return icons[category] || '<i class="fas fa-leaf"></i>';
        }

        // ë¦¬ë”ë³´ë“œ ë¡œë“œ
        async function loadLeaderboard() {
            // ë°ëª¨ ë¦¬ë”ë³´ë“œ ë°ì´í„°
            const demoLeaderboard = [
                { rank: 1, name: 'ì—ì½”ê¹€ì„ ìƒ', level: 'í™˜ê²½ìˆ˜í˜¸ì', score: -45.2, avatar: 'ê¹€' },
                { rank: 2, name: 'ì¹œí™˜ê²½ë°•ì”¨', level: 'ì—ì½”ì›Œë¦¬ì–´', score: -38.7, avatar: 'ë°•' },
                { rank: 3, name: 'ë¡œì»¬ì´ì”¨', level: 'ê·¸ë¦°ë¦¬ë”', score: -32.1, avatar: 'ì´' },
                { rank: 4, name: 'ì œë¡œì›¨ìµœì”¨', level: 'ì—ì½”ì›Œë¦¬ì–´', score: -28.9, avatar: 'ìµœ' },
                { rank: 5, name: 'ìœ ê¸°ë†ì •ì”¨', level: 'ê·¸ë¦°ë¹„ê¸°ë„ˆ', score: -25.4, avatar: 'ì •' },
                { rank: 6, name: 'ì§€êµ¬ì§€í‚´ì´', level: 'ì—ì½”ì›Œë¦¬ì–´', score: -22.8, avatar: 'ì§€' },
                { rank: 7, name: 'ë‹¹ì‹ ', level: 'ì—ì½”ì›Œë¦¬ì–´', score: -12.5, avatar: 'ë‚˜', isCurrentUser: true }
            ];

            renderLeaderboard(demoLeaderboard);
        }

        // ë¦¬ë”ë³´ë“œ ë Œë”ë§
        function renderLeaderboard(leaderboard) {
            const list = document.getElementById('leaderboardList');

            list.innerHTML = leaderboard.map(user => {
                const rankClass = user.rank === 1 ? 'gold' :
                                  user.rank === 2 ? 'silver' :
                                  user.rank === 3 ? 'bronze' : 'other';

                return `
                    <li class="leaderboard-item" ${user.isCurrentUser ? 'style="background: #e8f5e8; border: 2px solid #27ae60; border-radius: 10px;"' : ''}>
                        <div class="leaderboard-rank ${rankClass}">
                            ${user.rank <= 3 ?
                                (user.rank === 1 ? 'ğŸ¥‡' : user.rank === 2 ? 'ğŸ¥ˆ' : 'ğŸ¥‰') :
                                user.rank
                            }
                        </div>
                        <div class="leaderboard-user">
                            <div class="user-avatar">${user.avatar}</div>
                            <div class="user-info">
                                <h4>${user.name} ${user.isCurrentUser ? '(ë‚˜)' : ''}</h4>
                                <div class="user-level">${user.level}</div>
                            </div>
                        </div>
                        <div class="leaderboard-score">
                            <div class="score-value">${user.score}kg</div>
                            <div class="score-label">COâ‚‚ ì ˆì•½</div>
                        </div>
                    </li>
                `;
            }).join('');
        }

        // íˆì–´ë¡œ í†µê³„ ì—…ë°ì´íŠ¸
        function updateHeroStats() {
            // ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ë°ì´í„°
            const stats = {
                totalCarbon: -2847,
                participants: 1234,
                activeChallenges: 15,
                successRate: 89
            };

            // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¡œ ìˆ«ì ì¹´ìš´íŒ…í•  ìˆ˜ ìˆìŒ
        }

        // ì±Œë¦°ì§€ ì°¸ì—¬
        function joinChallenge(challengeId) {
            showNotification('ì±Œë¦°ì§€ì— ì°¸ì—¬í–ˆìŠµë‹ˆë‹¤! ğŸ‰', 'success');

            // UI ì—…ë°ì´íŠ¸ (ì‹¤ì œë¡œëŠ” ì„œë²„ í†µì‹  í›„)
            setTimeout(() => {
                loadChallenges();
                userData.activeChallenges++;
            }, 500);
        }

        // ì±Œë¦°ì§€ ì§„í–‰ ì—…ë°ì´íŠ¸
        function updateProgress(challengeId) {
            const progress = prompt('í˜„ì¬ ì§„í–‰ë¥ ì„ ì…ë ¥í•˜ì„¸ìš” (0-100):');
            if (progress && !isNaN(progress) && progress >= 0 && progress <= 100) {
                showNotification(`ì§„í–‰ë¥ ì´ ${progress}%ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€`, 'success');

                // UI ì—…ë°ì´íŠ¸
                setTimeout(() => {
                    loadChallenges();
                }, 500);
            }
        }

        // ì±Œë¦°ì§€ ìƒì„¸ë³´ê¸°
        function viewChallenge(challengeId) {
            // ì‹¤ì œë¡œëŠ” ìƒì„¸ í˜ì´ì§€ë‚˜ ëª¨ë‹¬ë¡œ ì´ë™
            alert(`ì±Œë¦°ì§€ ìƒì„¸ ì •ë³´:
ID: ${challengeId}

ìƒì„¸ í˜ì´ì§€ëŠ” ê°œë°œ ì¤‘ì…ë‹ˆë‹¤! ğŸš§
ì°¸ì—¬ ë°©ë²•, ì§„í–‰ í˜„í™©, ì»¤ë®¤ë‹ˆí‹° í”¼ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
        }

        // ì±Œë¦°ì§€ ê³µìœ 
        function shareChallenge(challengeId) {
            if (navigator.share) {
                navigator.share({
                    title: 'PAM-TALK íƒ„ì†Œ ì±Œë¦°ì§€',
                    text: 'í•¨ê»˜ ì§€êµ¬ë¥¼ êµ¬í•´ìš”! íƒ„ì†Œë°œìêµ­ ì¤„ì´ê¸° ì±Œë¦°ì§€ì— ì°¸ì—¬í•˜ì„¸ìš”.',
                    url: `${window.location.origin}/challenges/${challengeId}`
                });
            } else {
                // í´ë¦½ë³´ë“œì— ë³µì‚¬
                const url = `${window.location.origin}/challenges/${challengeId}`;
                navigator.clipboard.writeText(url).then(() => {
                    showNotification('ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹', 'success');
                });
            }
        }

        // ìƒˆ ì±Œë¦°ì§€ ìƒì„±
        function createChallenge() {
            alert(`ìƒˆ ì±Œë¦°ì§€ ì œì•ˆí•˜ê¸°! ğŸ’¡

ë‹¤ìŒ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
- ì±Œë¦°ì§€ ì œëª©
- ëª©í‘œ íƒ„ì†Œ ì ˆì•½ëŸ‰
- ê¸°ê°„
- ì°¸ì—¬ ë°©ë²•
- ë³´ìƒ í¬ì¸íŠ¸

ì±Œë¦°ì§€ ìƒì„± í¼ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤! ğŸš§`);
        }

        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ìŠ¤í•€ ì• ë‹ˆë©”ì´ì…˜ CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>